<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>TiketHet</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div id="app" class="app">
        <!-- Header -->
        <header class="header">
            <div class="header__left">
                <h1 class="header__title">üé´ –ú–æ–∏ —Ç–∏–∫–µ—Ç—ã</h1>
                <div id="connectionStatus" class="connection-status">
                    <span class="connection-status__dot"></span>
                    <span class="connection-status__text">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...</span>
                </div>
            </div>
            <button id="createTicketBtn" class="btn btn--primary btn--round">
                <span class="btn__text">+ –°–æ–∑–¥–∞—Ç—å —Ç–∏–∫–µ—Ç</span>
            </button>
        </header>

        <!-- Main content -->
        <main class="main">
            <!-- Loading state -->
            <div id="loading" class="loading">
                <div class="loading__spinner"></div>
                <p class="loading__text">–ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–∏–∫–µ—Ç—ã...</p>
            </div>

            <!-- Error state -->
            <div id="error" class="error" style="display: none;">
                <div class="error__icon">‚ö†Ô∏è</div>
                <h3 class="error__title">–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫</h3>
                <p class="error__message" id="errorMessage"></p>
                <button id="retryBtn" class="btn btn--secondary">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
            </div>

            <!-- Empty state -->
            <div id="emptyState" class="empty-state" style="display: none;">
                <div class="empty-state__icon">üìù</div>
                <h3 class="empty-state__title">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Ç–∏–∫–µ—Ç–æ–≤</h3>
                <p class="empty-state__description">
                    –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π —Ç–∏–∫–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø–æ–º–æ—â—å –æ—Ç –Ω–∞—à–µ–π –∫–æ–º–∞–Ω–¥—ã
                </p>
                <button id="createFirstTicketBtn" class="btn btn--primary">
                    –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π —Ç–∏–∫–µ—Ç
                </button>
            </div>

            <!-- Tickets list -->
            <div id="ticketsList" class="tickets-list" style="display: none;">
                <!-- Filter buttons -->
                <div class="filter">
                    <button class="filter__btn filter__btn--active" data-status="all">
                        –í—Å–µ
                    </button>
                    <button class="filter__btn" data-status="OPEN">
                        –û—Ç–∫—Ä—ã—Ç—ã–µ
                    </button>
                    <button class="filter__btn" data-status="IN_PROGRESS">
                        –í —Ä–∞–±–æ—Ç–µ
                    </button>
                    <button class="filter__btn" data-status="CLOSED">
                        –ó–∞–∫—Ä—ã—Ç—ã–µ
                    </button>
                </div>

                <!-- Tickets container -->
                <div id="ticketsContainer" class="tickets">
                    <!-- Tickets will be inserted here -->
                </div>

                <!-- Load more button -->
                <button id="loadMoreBtn" class="btn btn--secondary btn--full" style="display: none;">
                    –ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ
                </button>
            </div>
        </main>
    </div>

    <!-- Ticket template -->
    <template id="ticketTemplate">
        <div class="ticket">
            <div class="ticket__header">
                <div class="ticket__status" data-status="">
                    <span class="ticket__status-text"></span>
                </div>
                <div class="ticket__priority" data-priority="">
                    <span class="ticket__priority-text"></span>
                </div>
            </div>
            
            <div class="ticket__content">
                <h3 class="ticket__title"></h3>
                <p class="ticket__description"></p>
                
                <div class="ticket__meta">
                    <div class="ticket__category">
                        <span class="ticket__category-icon"></span>
                        <span class="ticket__category-name"></span>
                    </div>
                    <div class="ticket__date"></div>
                </div>
            </div>
            
            <div class="ticket__footer">
                <div class="ticket__messages-count">
                    <span class="ticket__messages-icon">üí¨</span>
                    <span class="ticket__messages-text"></span>
                </div>
            </div>
        </div>
    </template>

    <script src="js/api.js"></script>
    <script src="js/websocket.js"></script>
    <script src="js/main.js"></script>
</body>
</html>